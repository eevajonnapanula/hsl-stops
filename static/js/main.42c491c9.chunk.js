(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{50:function(n,e,t){n.exports=t(68)},67:function(n,e,t){},68:function(n,e,t){"use strict";t.r(e);var r=t(1),a=t.n(r),o=t(20),i=t.n(o),c=t(10),l=t(48),u=t(15),d=t(26),m=t.n(d),s=t(5),f=t(7),p=t(37);function g(){var n=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n"]);return g=function(){return n},n}function h(){var n=Object(s.a)(["\n  padding: 1em;\n"]);return h=function(){return n},n}function b(){var n=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 10em;\n"]);return b=function(){return n},n}function v(){var n=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  border-bottom: 1px solid black;\n  width: 100%;\n  padding-top: 1em;\n  padding-bottom: 1em;\n\n  :last-child {\n    border-bottom: none;\n  }\n"]);return v=function(){return n},n}function E(){var n=Object(s.a)(["\n  display: 'flex';\n  flex-direction: column;\n  align-items: center;\n  border: 1px solid black;\n  border-radius: 0.5em;\n  @media (max-width: 480px) {\n    width: 18em;\n  }\n\n  @media (min-width: 480px) {\n    width: 25em;\n  }\n"]);return E=function(){return n},n}function j(){var n=Object(s.a)(["\n  border-radius: 0.5em;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  mergin-bottom: 1em;\n  color: white;\n  margin-top: 1em;\n  background-color: ",";\n\n  @media (max-width: 480px) {\n    width: 17.5em;\n  }\n\n  @media (min-width: 480px) {\n    width: 22.5em;\n  }\n"]);return j=function(){return n},n}function O(){var n=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  margin-bottom: 0.25em;\n  margin-left: 0.5em;\n  margin-right: 0.5em;\n"]);return O=function(){return n},n}function y(){var n=Object(s.a)(["\n  width: 100%;\n  font-family: 'Roboto', sans-serif;\n  flex-direction: column;\n  display: flex;\n  align-items: center;\n"]);return y=function(){return n},n}function w(){var n=Object(s.a)(["\n  font-size: ",";\n"]);return w=function(){return n},n}function x(){var n=Object(s.a)(["\n  color: ",";\n  padding-right: 0.5em;\n"]);return x=function(){return n},n}function S(){var n=Object(s.a)(["\n\n"]);return S=function(){return n},n}function k(){var n=Object(s.a)(["\n  margin-right: 1em;\n  animation: "," 10s linear infinite;\n"]);return k=function(){return n},n}function C(){var n=Object(s.a)(["\n  margin-right: 1em;\n  width: 1em;\n"]);return C=function(){return n},n}function I(){var n=Object(s.a)(["\n  border-radius: 0.5em;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  padding: 0.5em;\n  margin-bottom: 1em;\n  color: white;\n"]);return I=function(){return n},n}function R(){var n=Object(s.a)(["\n  border-top-left-radius: 0.5em;\n  border-top-right-radius: 0.5em;\n  display: flex;\n  justify-content: flex-start;\n  padding-left: 1.5em;\n  background-color: ",";\n"]);return R=function(){return n},n}function A(){var n=Object(s.a)(["\n  border: 1px solid black;\n  padding: 1em;\n  border-radius: 0.5em;\n  margin: 0.5em;\n  @media (max-width: 480px) {\n    width: ",";\n  }\n\n  @media (min-width: 480px) {\n    width: ",";\n  }\n\n  width: 20em;\n"]);return A=function(){return n},n}function B(){var n=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n\n"]);return B=function(){return n},n}function N(){var n=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]);return N=function(){return n},n}function q(){var n=Object(s.a)(["\n  0% {\n    color: rgb(255,255,255);\n  }\n\n  50% {\n    color: rgb(240,146,205);\n  }\n\n  100% {\n    color: rgb(255,255,255);\n  }\n"]);return q=function(){return n},n}var M=Object(f.b)(q()),P=(f.a.div(N()),f.a.main(B())),W=f.a.input(A(),function(n){return n.width||"15em"},function(n){return n.width||"20em"}),z=f.a.div(R(),function(n){return n.color}),D=f.a.div(I()),F=f.a.span(C()),J=f.a.span(k(),M),L=f.a.span(S()),H=f.a.span(x(),function(n){return n.color}),K=f.a.span(w(),function(n){return n.size||"1em"}),T=f.a.div(y()),U=f.a.div(O()),Y=f.a.div(j(),function(n){return n.color.substring(0,n.color.length-3)+",0.8)"}),$=p.a.div({open:{y:0,opacity:1,transition:{duration:500}},closed:{y:-200,opacity:0,transition:{duration:1e3}}}),G=Object(f.a)($)(E()),Q=p.a.div(),V=Object(f.a)(Q)(v()),X=f.a.div(b()),Z=f.a.p(h()),_=f.a.header(g());function nn(){var n=Object(s.a)(["\n\n"]);return nn=function(){return n},n}function en(){var n=Object(s.a)(["\n\n"]);return en=function(){return n},n}function tn(){var n=Object(s.a)(["\n\n"]);return tn=function(){return n},n}f.a.h1(tn());var rn=f.a.h2(en()),an=(f.a.h3(nn()),t(12)),on=function(n){var e=n.animated,t=n.time;return a.a.createElement("div",null,e?a.a.createElement(J,null,t):a.a.createElement(F,null,t))},cn={FERRY:{component:a.a.createElement(an.e,null),color:"rgba(0,185,228,1)"},RAIL:{component:a.a.createElement(an.g,null),color:"rgba(140,71,153,1)"},BUS:{component:a.a.createElement(an.c,null),color:"rgba(0,122,201,1)"},SUBWAY:{component:a.a.createElement(an.f,null),color:"rgba(255,99,25,1)"},TRAM:{component:a.a.createElement(an.d,null),color:"rgba(0,152,95,1)"},null:{component:a.a.createElement(an.e,null),color:"rgba(0,185,228,1)"}},ln=function(n){return m.a.unix(n.serviceDay+n.realtimeArrival).diff(m()(),"minutes")},un=function(n){return m.a.unix(n.serviceDay+n.realtimeArrival).format("HH:mm")},dn=function(n){var e=n.stop,t=n.distance;return a.a.createElement(Y,{color:cn[e.vehicleMode].color},a.a.createElement(z,{color:cn[e.vehicleMode].color},a.a.createElement(rn,null,a.a.createElement(H,{color:"white"},cn[e.vehicleMode].component),e.name,t&&" ".concat(t," m"))),a.a.createElement(D,null,e.stoptimesWithoutPatterns.map(function(n,e){return a.a.createElement(U,{key:e},a.a.createElement(on,{animated:n.realtime,time:ln(n)<10?ln(n)+" min":un(n)}),a.a.createElement(L,null,n.trip.routeShortName," ",n.headsign))})))},mn=t(14),sn=t.n(mn);function fn(){var n=Object(s.a)(["\n  fragment StopFragment on Stop {\n    name\n    gtfsId\n    vehicleMode\n    stoptimesWithoutPatterns(omitNonPickups: true) {\n      realtimeDeparture\n      realtimeArrival\n      realtime\n      serviceDay\n      headsign\n      trip {\n        routeShortName\n      }\n    }\n  }\n"]);return fn=function(){return n},n}function pn(){var n=Object(s.a)(["\n  {\n    stopsByRadius(lat:",", lon: ",", radius:",") {\n      edges {\n        node {\n          stop {\n            ...StopFragment\n          }\n          distance\n        }\n      }\n    }\n  }\n\n  ","\n"]);return pn=function(){return n},n}function gn(){var n=Object(s.a)(['\n  {\n    stops(name: "','") {\n      ...StopFragment\n    }\n  }\n\n  ',"\n"]);return gn=function(){return n},n}var hn=sn()(fn()),bn=function(n){var e=function(n){return sn()(gn(),n,hn)}(n.queryString);return a.a.createElement(u.b,{query:e,pollInterval:15e3},function(n){var e=n.loading,t=n.error,r=n.data;return e?a.a.createElement(Z,null,"Loading..."):t?a.a.createElement(Z,null,"Error :("):a.a.createElement(P,null,r.stops.length>0?a.a.createElement("div",null,r.stops.map(function(n){return a.a.createElement(dn,{key:n.gtfsId,stop:n})})):a.a.createElement(Z,null,"No results found :("))})},vn=function(n){var e=function(n){return sn()(pn(),n.lat,n.lon,n.radius,hn)}(n.coordinates);return a.a.createElement(u.b,{query:e,pollInterval:15e3},function(n){var e=n.loading,t=n.error,r=n.data;return e?a.a.createElement(Z,null,"Loading..."):t?a.a.createElement(Z,null,"Error :("):a.a.createElement(P,null,r.stopsByRadius.edges.length>0?a.a.createElement("div",null,r.stopsByRadius.edges.map(function(n){var e=n.node;return a.a.createElement(dn,{key:e.stop.gtfsId,stop:e.stop,distance:e.distance})})):a.a.createElement(Z,null,"No results found :("))})},En=t(45),jn=t.n(En),On=function(n){return a.a.createElement(X,null,a.a.createElement("h5",null,"Search for a stop"),a.a.createElement(W,{onChange:function(e){return n.handleChange(e.target.value)},placeholder:"Search for a stop"}))},yn=t(35),wn=t.n(yn),xn=t(46),Sn=function(n){return fetch(n).then(function(n){return n.json()}).catch(function(e){console.error("Error fetching: ".concat(n,": ").concat(e.toString()))})},kn=function(n){var e=n.handleChange,t=Object(r.useState)([]),o=Object(c.a)(t,2),i=o[0],l=o[1],u=Object(r.useState)(""),d=Object(c.a)(u,2),m=d[0],s=d[1],f=Object(r.useState)(500),p=Object(c.a)(f,2),g=p[0],h=p[1],b=Object(r.useState)(""),v=Object(c.a)(b,2),E=v[0],j=v[1],O=Object(r.useState)("closed"),y=Object(c.a)(O,2),w=y[0],x=y[1];Object(r.useEffect)(function(){!function(){var n=Object(xn.a)(wn.a.mark(function n(){var e,t;return wn.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(E.length>2)){n.next=7;break}return e="https://api.digitransit.fi/geocoding/v1/autocomplete?text=".concat(E,"&focus.point.lat=60.17&focus.point.lon=24.93"),n.next=4,Sn(e);case 4:t=n.sent,l(t.features),x("open");case 7:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}()()},[E]);var S=function(n){"Enter"===n.key&&(x("closed"),j(m))};return a.a.createElement("section",null,a.a.createElement(X,null,a.a.createElement("h5",null,"Search by address"),a.a.createElement(W,{value:m,onChange:function(n){s(n.target.value),n.target.value.length>2&&j(n.target.value)},placeholder:"Type an address",onKeyPress:S}),a.a.createElement("div",null,a.a.createElement("span",null,"Change radius"),a.a.createElement(W,{placeholder:"500",width:"5em",type:"number",value:g,onChange:function(n){return h(n.target.value)},onKeyPress:S}),a.a.createElement("span",null,"m"))),i.length>0?a.a.createElement(G,{pose:w},i.map(function(n){return a.a.createElement(V,{key:n.properties.id,onClick:function(){return function(n){e({lon:n.geometry.coordinates[0],lat:n.geometry.coordinates[1],radius:g}),x("closed"),l([]),s("")}(n)}},n.properties.label)})):"")},Cn=function(n){var e=n.handleInputChange,t=n.handleAddressChange,o=Object(r.useState)(1),i=Object(c.a)(o,2),l=i[0],u=i[1],d=function(){u(0===l?1:0)};return a.a.createElement(_,null,a.a.createElement(K,{size:"2em"},a.a.createElement(an.a,{onClick:d})),a.a.createElement(jn.a,{onSwipedLeft:d,onSwipedRight:d},0===l?a.a.createElement(On,{handleChange:e}):a.a.createElement(kn,{handleChange:t})),a.a.createElement(K,{size:"2em"},a.a.createElement(an.b,{onClick:d})))},In=new l.a({uri:"https://api.digitransit.fi/routing/v1/routers/hsl/index/graphql"}),Rn=function(){var n=JSON.parse(localStorage.getItem("coordinates")),e={lat:n?n.lat:60.17,lon:n?n.lon:24.936,radius:n?n.radius:500},t=Object(r.useState)(""),o=Object(c.a)(t,2),i=o[0],l=o[1],d=Object(r.useState)(e),m=Object(c.a)(d,2),s=m[0],f=m[1],p=Object(r.useState)(!1),g=Object(c.a)(p,2),h=g[0],b=g[1];return a.a.createElement(u.a,{client:In},a.a.createElement(T,null,a.a.createElement(Cn,{handleAddressChange:function(n){var e={lat:n.lat,lon:n.lon,radius:n.radius};b(!0),f(e),localStorage.setItem("coordinates",JSON.stringify(e))},handleInputChange:function(n){n.length>2&&(l(n),b(!1))}}),h?a.a.createElement(vn,{coordinates:s}):a.a.createElement(bn,{queryString:i})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(67);i.a.render(a.a.createElement(Rn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()})}},[[50,1,2]]]);
//# sourceMappingURL=main.42c491c9.chunk.js.map